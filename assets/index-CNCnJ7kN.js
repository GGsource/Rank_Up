(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(l){if(l.ep)return;l.ep=!0;const r=n(l);fetch(l.href,r)}})();const s=class s{constructor(t=!1){this.rowFull=document.createElement("div"),this.rowBody=document.createElement("div"),this.rowFull.className="rowFull",this.rowFull.id="rowFull"+s.count;let n=document.createElement("div");n.className="rowHeader rowPiece",n.id="rowHeader"+s.count;let o=document.createElement("div");o.className="rowTab rowPiece closed",o.id="rowTab"+s.count,n.onmouseover=()=>M(o),n.onmouseout=()=>b(o);let l=document.createElement("img");l.className="tabButton addRowButton addRowAboveButton",l.src="/src/assets/images/addRowAboveIcon.png",l.onclick=()=>D(this.rowFull,!0),l.ondragstart=c=>c.preventDefault();let r=document.createElement("div");r.className="tabButton dragContainer";let i=document.createElement("img");i.className="dragHandle",i.src="/src/assets/images/DragHandleIcon.png",r.appendChild(i);let g=document.createElement("img");g.className="tabButton addRowButton addRowBelowButton",g.src="/src/assets/images/addRowBelowIcon.png",g.onclick=()=>D(this.rowFull,!1),g.ondragstart=c=>c.preventDefault(),o.appendChild(l),o.appendChild(r),o.appendChild(g);let d=document.createElement("input");d.className="rowTitle",d.id="rowTitle"+s.count,d.placeholder=t?"New Row":"Row "+s.count,d.ondrop=c=>z(c),d.onfocus=()=>L();let f=document.createElement("div");f.className="resetDeleteContainer",f.id="resetDeleteContainer"+s.count;let m=document.createElement("div");m.className="resetButton resetDeleteButton",m.id="resetButton"+s.count,m.style.backgroundImage="url('/src/assets/images/RowHeaderClear.png')",m.onclick=()=>E(this.rowBody);let p=document.createElement("div");p.className="deleteButton resetDeleteButton",p.id="deleteButton"+s.count,p.style.backgroundImage="url('/src/assets/images/RowHeaderDelete.png')",p.onclick=()=>j(this.rowFull),f.appendChild(m),f.appendChild(p),n.appendChild(o),n.appendChild(d),n.appendChild(f),this.rowFull.appendChild(n),this.rowBody.className="rowBody rowPiece Container",this.rowBody.onclick=c=>K(c),this.rowBody.ondragover=c=>P(c),this.rowBody.ondragend=c=>O(),m.onclick=()=>E(this.rowBody),this.rowFull.appendChild(this.rowBody),s.count++}appendTo(t){t.appendChild(this.rowFull)}};s.count=1;let h=s,a,T=new Image;T.src="/src/assets/images/empty.png";let u=new Set,C;function A(e){document.body.classList.remove("allow-hover");let t=e.target;t?(u.has(t)||S(e),u.forEach(n=>{n.setAttribute("data-dragging","true"),n.classList.add("draggingImage")}),a=document.createElement("div"),a.style.position="absolute",a.style.zIndex="1000",a.style.width=`${t.width}px`,a.style.height=`${t.height}px`,a.style.backgroundColor="#f0f0f055",a.style.border="1px solid #000",a.style.borderRadius="10%",a.style.textAlign="center",a.style.font="2em 'Alice', sans-serif",a.textContent=u.size.toString(),document.body.appendChild(a),x(e),e.dataTransfer?e.dataTransfer.setDragImage(T,0,0):console.error("ev.dataTransfer is null in DragStart")):console.error("Tried to drag image but it's null in DragStart")}function F(e){a&&x(e)}let v,N;function P(e){e.preventDefault();let t=document.querySelectorAll("[data-dragging]"),n=e.target;if(n){if(n.classList.contains("Container"))t.forEach(o=>{v==n&&o.nextElementSibling==null||n.appendChild(o)});else if(n.classList.contains("rankingImage")){let o=n;if(u.has(o))return;let l=o.getBoundingClientRect(),r=l.left+l.width/2,i=e.clientX<r;if(v==n&&i==N)return;t.forEach(g=>{i?o.insertAdjacentElement("beforebegin",g):H(o)}),N=i}v=n}else console.error("ev.target is is null in DragImageOver")}function O(e){document.body.classList.add("allow-hover");var t=document.querySelectorAll("[data-dragging]");t.forEach(n=>{n.classList.remove("draggingImage"),n.removeAttribute("data-dragging")}),a.remove()}function x(e){a.style.left=`${e.pageX}px`,a.style.top=`${e.pageY}px`}function H(e){let t=u.values();R(e,t)}function R(e,t){let n=t.next();n.done||(e.insertAdjacentElement("afterend",n.value),R(n.value,t))}function E(e){if(e.hasChildNodes()){let t=document.getElementById("imageContainer");if(t){if(e.firstChild)for(;e.hasChildNodes();)t.appendChild(e.firstChild)}else console.error("Tried to get imageCountainer while resetting a row but it's null.")}}function j(e){let t=e.getElementsByClassName("rowBody")[0];E(t),e.remove();let n=document.getElementById("rowList");if(n&&n.childElementCount==1){let o=n.getElementsByClassName("deleteButton")[0];o.style.pointerEvents="none",o.style.opacity=`${.2}`}}function D(e,t){var n=document.getElementById("rowList");if(n&&n.childElementCount==1){let o=n.getElementsByClassName("deleteButton")[0];o.style.pointerEvents="auto",o.style.opacity="1"}t?e.insertAdjacentElement("beforebegin",new h(!0).rowFull):e.insertAdjacentElement("afterend",new h(!0).rowFull)}let y={},w;function M(e){w&&w!=e&&b(w,!1),clearTimeout(y[e.id]),e.classList.remove("closed"),w=e}function b(e,t=!0){if(I)return;y[e.id]&&clearTimeout(y[e.id]);let n=t?500:0;y[e.id]=setTimeout(()=>{e.classList.add("closed")},n)}window.addEventListener("keydown",function(e){(e.key=="Control"||e.key=="Shift")&&e.preventDefault()});function S(e){let t=e.target;if(t){let n=t.parentNode,o=Array.from(n.children),l=o.indexOf(t);if(e.ctrlKey)q(t);else if(e.shiftKey&&C){let r=o.indexOf(C);if(r!==-1){let i=Math.min(l,r),g=Math.max(l,r);for(let d=i;d<=g;d++)B(o[d])}else B(t)}else L(),B(t);C=t}else console.log("Image was clicked but returned null.")}function B(e){u.add(e),e.classList.add("selectedImage")}function k(e){u.delete(e),e.classList.remove("selectedImage")}function q(e){u.has(e)?k(e):B(e)}function L(){u.forEach(k),u.clear()}function K(e){let t=e.target;t&&t.classList.contains("Container")&&L()}function z(e){let t=e.dataTransfer;t&&(t.types.length!=1||t.types[0]!="text/plain")&&e.preventDefault();let n=e.target;console.log(`Dragged something over ${n.id} but this is an invalid drag target`),console.log("Data: ",t)}function X(e){let t=document.getElementById("rowList");if(t)for(let n=0;n<e;n++)new h().appendTo(t)}function Y(){let e=["bird","bird_evil","BordBlue","BordGreen","BordPink","BordPorple","BordRee","BordWhite","BordYellow"],t=document.getElementById("imageContainer");t?e.forEach(n=>{let o=document.createElement("img");o.className="rankingImage",o.src="/src/assets/images/"+n+".png",o.onclick=l=>S(l),o.ondragstart=l=>A(l),o.ondrag=l=>F(l),t.appendChild(o)}):console.error("Couldn't populate container with placeholders because imageContainer was not null.")}let I=!1;function G(){$("#rowList").sortable({handle:".dragContainer",axis:"y",start:function(e,t){I=!0},stop:function(e,t){I=!1,b(t.item[0].getElementsByClassName("rowTab")[0])}})}function W(){X(5),G(),Y()}W();
